<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"
    integrity="sha512-jduERlz7En1IUZR54bqzpNI64AbffZWR//KJgF71SJ8D8/liKFZ+s1RxmUmB+bhCnIfzebdZsULwOrbVB5f3nQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <title>LoopCraftHub</title>
  <link rel="stylesheet" href="style.css">:
  <script src="https://code.jquery.com/jquery-3.2.1.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/round-slider@1.6.1/dist/roundslider.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/round-slider@1.6.1/dist/roundslider.min.js"></script>
  <script type="module">
    window.username = new URL(location.href).searchParams.get("user")
  </script>
  <script src="main.js" type="module" defer></script>
</head>

<body>

  <template>
    <div id="initial-form" class="form">
      <form autocomplete="off" id="form" onsubmit="formSubmit(event)">
        <script>
          function changeFunction() {
            var selectBox = document.getElementById("promptOrAudio");
            var selectedValue = selectBox.options[selectBox.selectedIndex].value;
            if (selectedValue == "prompt") {
              // document.querySelector("#initial-form").("prompt").style.display = "block";
              document.getElementById("audioInput").style.display = "none";
              document.getElementById("prompt").style.display = "block";
            } else {
              document.getElementById("prompt").style.display = "none";
              document.getElementById("audioInput").style.display = "block";
            }
          }
          function closeModal() {
            document.querySelector(".modal").remove();
          }
        </script>
        <p>As a starting point, you must either generate audio using a prompt or upload an audio file of your own</p>
        <select onchange="changeFunction()" name="promptOrAudio" id="promptOrAudio">
          <option value="prompt">Prompt</option>
          <option value="audio">Audio</option>
        </select>

        <input name="prompt" id="prompt" type="text" placeholder="Prompt">
        <input type="file" id="audioInput" style="display: none;" accept="audio/*" />
        <div class="buttons">
          <button id="submit">Submit</button>
          <button id="close" type="button" onclick="closeModal()">Close</button>
        </div>
      </form>
      <img id="spinner" src="spinner2.svg" alt="loading spinner">
    </div>
  </template>
  <template>
    <div id="initial-form" class="form">
      <form autocomplete="off" id="form" onsubmit="formSubmit2(event)">
        <script>
          function changeFunction() {
            var selectBox = querySelectorAll(".track-container")
            var selectedValue = selectBox.options[selectBox.selectedIndex].value;
            if (selectedValue == "prompt") {
              document.getElementById("audioInput").style.display = "none";
              document.getElementById("prompt").style.display = "block";
            } else {
              document.getElementById("prompt").style.display = "none";
              document.getElementById("audioInput").style.display = "block";
            }
          }
          function closeModal() {
            document.querySelector(".modal").remove();
          }
        </script>
        <p>Type in a prompt to generate new loops</p>

        <input name="prompt" id="prompt" type="text" placeholder="Prompt">
        <div class="buttons">
          <button id="submit">Submit</button>
          <button id="close" type="button" onclick="closeModal()">Close</button>
        </div>
      </form>
      <img id="spinner" src="spinner2.svg" alt="loading spinner">
    </div>
  </template>
  <!-- <div class="form">
    <a href="javascript:void(0);" id="start">Start</a>
    <form autocomplete="off" id="form" onsubmit="formSubmit(event)">
      <label for="prompt">Prompt:</label>
      <input name="prompt" id="prompt" type="text" placeholder="Prompt">
      <input type="file" id="audioInput" accept="audio/*" oninput="handleUpload()" />
      <button id="submit">Submit</button>
    </form>
    <img id="spinner" src="spinner2.svg" alt="loading spinner">
  </div> -->
  <div id="track-area">
    <div id="add-track">
      <div style="width:100px;height:100px;position:absolute; z-index: -1; display: none;" id="loading">
        <?xml version="1.0" encoding="utf-8"?>
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
          style="margin: auto; background: rgba(241, 242, 243, 0); display: block; shape-rendering: auto;" width="100px"
          height="100px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
          <g transform="translate(50 50)">
            <g transform="scale(0.7)">
              <g transform="translate(-50 -50)">
                <g>
                  <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite"
                    values="0 50 50;360 50 50" keyTimes="0;1" dur="0.7575757575757576s"></animateTransform>
                  <path fill-opacity="0.8" fill="#222222" d="M50 50L50 0A50 50 0 0 1 100 50Z"></path>
                </g>
                <g>
                  <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite"
                    values="0 50 50;360 50 50" keyTimes="0;1" dur="1.0101010101010102s"></animateTransform>
                  <path fill-opacity="0.8" fill="#00d8ff" d="M50 50L50 0A50 50 0 0 1 100 50Z"
                    transform="rotate(90 50 50)"></path>
                </g>
                <g>
                  <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite"
                    values="0 50 50;360 50 50" keyTimes="0;1" dur="1.5151515151515151s"></animateTransform>
                  <path fill-opacity="0.8" fill="#222222" d="M50 50L50 0A50 50 0 0 1 100 50Z"
                    transform="rotate(180 50 50)"></path>
                </g>
                <g>
                  <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite"
                    values="0 50 50;360 50 50" keyTimes="0;1" dur="3.0303030303030303s"></animateTransform>
                  <path fill-opacity="0.8" fill="#00d8ff" d="M50 50L50 0A50 50 0 0 1 100 50Z"
                    transform="rotate(270 50 50)"></path>
                </g>
              </g>
            </g>
          </g>
          <!-- [ldio] generated by https://loading.io/ -->
        </svg>
      </div>
      <?xml version="1.0"?><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="50px" height="50px">
        <path
          d="M15,3C8.373,3,3,8.373,3,15c0,6.627,5.373,12,12,12s12-5.373,12-12C27,8.373,21.627,3,15,3z M21,16h-5v5 c0,0.553-0.448,1-1,1s-1-0.447-1-1v-5H9c-0.552,0-1-0.447-1-1s0.448-1,1-1h5V9c0-0.553,0.448-1,1-1s1,0.447,1,1v5h5 c0.552,0,1,0.447,1,1S21.552,16,21,16z" />
      </svg>
    </div>
  </div>


</body>

</html>